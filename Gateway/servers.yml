servers:
  - name: mainServer
    host: localhost
#     192.168.0.2
    protocol: http
    docker:
      ca: /path/ca.pem
      cert: /path/cert.pem
      key: /path/client-key.pem
    count: 3

  - name: wiremock
    host: yacht.r-e.kr
    protocol: http
    count: 1

  - name: sub
    host: 0.0.0.0
    protocol: http
    docker:
      ca: /path/ca.pem
      cert: /path/cert.pem
      key: /path/client-key.pem
    count: 1

services:
  - match-uri:
    - /calendar/
    - /alarm/
    pods:
      - name: msa-calendar
        server: mainServer
        port: 9094
    subs:
      - name: part
        server: sub
        port: 8083

  - match-uri:
    - /part/
    - /repair/
    pods:
      - name: msa-part
        server: mainServer
        port: 9093
    subs:
      - name: part
        server: sub
        port: 8082

  - match-uri:
    - /user/
    pods:
      - name: msa-user
        server: mainServer
        port: 9091
    subs:
      - name: user
        server: sub
        port: 8080

  - match-uri:
    - /yacht/
    pods:
      - name: msa-yacht
        server: mainServer
        port: 9092
    subs:
      - name: yacht
        server: sub
        port: 8081

  - match-uri:
    - /wiremock/
    pods:
      - name: wiremock
        server: wiremock
        port: 9099
    subs:
      - name: wiremock
        server: wiremock
        port: 9999